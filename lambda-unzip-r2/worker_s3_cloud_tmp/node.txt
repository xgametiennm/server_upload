[Client]
   |
   | Upload .zip
   â†“
[S3 Bucket]  â† Trigger â‘ 
   |
   â”œâ”€â”€ [Lambda 1: Unzip Worker]         â† Giáº£i nÃ©n .zip + upload tá»«ng file lÃªn S3 (hoáº·c R2)
   |
   â””â”€â”€ [Lambda 2: Sync Worker]          â† Äá»“ng bá»™ toÃ n bá»™ file (hoáº·c folder) sang R2

   ğŸ¯ PhÃ¢n tÃ­ch chi tiáº¿t:
âœ… Worker 1: Unzip Worker
Trigger khi .zip Ä‘Æ°á»£c upload vÃ o S3

Táº£i .zip vá» (stream hoáº·c buffer)

Giáº£i nÃ©n (dÃ¹ng adm-zip, unzipper, yauzlâ€¦)

Upload tá»«ng file Ä‘Ã£ giáº£i nÃ©n vÃ o:

S3 (theo prefix: unpacked/version/file)

Hoáº·c R2 luÃ´n

ğŸ‘‰ CÃ¡ch nÃ y giÃºp báº¡n xá»­ lÃ½ ná»™i dung .zip, vÃ­ dá»¥ asset/game map.

âœ… Worker 2: Sync Worker
Trigger khi file nÃ o Ä‘Ã³ Ä‘Æ°á»£c upload/changed á»Ÿ s3://bucket/unpacked/...

Má»¥c tiÃªu: Ä‘á»“ng bá»™ toÃ n bá»™ folder/file sang R2

Hoáº¡t Ä‘á»™ng kiá»ƒu nhÆ°: copy s3://... â†’ r2://...

ğŸ‘‰ Worker nÃ y xá»­ lÃ½ tÃ­nh Ä‘á»“ng bá»™, vÃ­ dá»¥ náº¿u báº¡n muá»‘n cÃ³ Ä‘áº§y Ä‘á»§ backup trÃªn R2.


--------------------------
âœ… 1. ThÃªm thá»§ cÃ´ng trong AWS Console (giao diá»‡n web)
CÃ¡c bÆ°á»›c:
VÃ o AWS Lambda Console

Chá»n hÃ m Lambda cá»§a báº¡n

Chuyá»ƒn Ä‘áº¿n tab Configuration

VÃ o má»¥c Environment variables

Báº¥m Edit

ThÃªm tá»«ng biáº¿n:
VÃ­ dá»¥:

Key	Value
R2_ACCESS_KEY_ID	abc123...
R2_SECRET_ACCESS_KEY	xyz456...
R2_ENDPOINT	https://xxxx.r2.cloudflarestorage.com
R2_BUCKET_NAME	xgame-assets